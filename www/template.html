<!DOCTYPE html>
<html>
	<head>
		<title>lurch</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
		<link rel="stylesheet" type="text/css" href="{{.UrlFor "static/style/style.css" }}" />
		<script type="text/javascript" src="{{.UrlFor "static/js/nunjs.min.js" }}"></script>
		<script type="text/javascript" src="{{.UrlFor "static/js/ajsf.min.js" }}"></script>
		<script type="text/javascript">
			const appUrl = "{{$.UrlFor "rest"}}";
		</script>
	</head>
	<body>
		<div id="header">
			<h1>lurch</h1>
			<h2>{{ .ProjectVersion }}</h2>
			<a href="https://github.com/tvrzna/lurch" target="_blank">github.com/tvrzna/lurch</a>
		</div>
		<div id="wrapper">
			{{ range .Projects }}
				<div class="project job-status-empty" ajsf="{{ . }}">
					<div class="top-panel">
						<div class="project-name">
							{{ . }}
							<span ajsf-text="selectedJob.name | prefix '#'" ajsf-show="selectedJob.name"></span>
						</div>
						<div class="project-action" ajsf-click="performAction" ajsf-title="actionTitle">
							<div ajsf-style-class="actionClass"></div>
						</div>
					</div>
					<div class="job-panel" ajsf-show="selectedJob.name">
						<div class="job-title collapsed" ajsf-click="toggleOutputCollapsed">
							<div class="detail" ajsf-show="selectedJob.name">
								<span class="label">Status:</span>
								<span ajsf-text="statusValue"></span>
								<span class="label">Started:</span>
								<span ajsf-text="startDateValue"></span>
								<span ajsf-text="jobLength"></span>
								<span class="label">Artifact:</span>
								<a ajsf-href="artifactDownloadUrl()" ajsf-click="downloadArtifact">Download</a>
							</div>
							<span class="indicator"></span>
						</div>
						<div class="job-output collapsed">
							<pre ajsf-text="selectedJob.output"></pre>
						</div>
					</div>
					<ul class="history-panel">
						<li ajsf-repeat="history">
							<span ajsf-text="item.name | prefix '#'"
									ajsf-click="root().showJob(item.name)"
									ajsf-style-class="item.status | prefix 'job-status-' | suffix root().isSelected(item.name)"
									ajsf-title="item.name | prefix '#' | suffix ' - ' | suffix root().statusValue(item) | suffix ' ' | suffix root().jobLength(item)"></span>
						</li>
					</ul>
				</div>
			{{ end }}
		</div>
		<script type="text/javascript" src="{{.UrlFor "static/js/app.js" }}"></script>
	</body>
</html>